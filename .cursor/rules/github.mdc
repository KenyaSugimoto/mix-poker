---
title: GitHub運用ルール（GitHub Rules）
type: github
priority: 2
description: GitHub Issueの立て方、PDCAフロー、コミットメッセージ、ブランチ戦略
tags: [github, issue, commit, branch, pdca, workflow]
---

# GitHub運用ルール（GitHub Rules）

## 🔄 PDCAフロー（必須）

GitHub MCPが利用可能な場合、以下のフローを厳守してください。

### Plan（計画）
- **作業開始前に必ずGitHub Issueを作成**
- **最新のmainブランチから開発用ブランチを作成**（必須）
  - ブランチ名は `feature/issue-{番号}-{簡潔な説明}` または `fix/issue-{番号}-{簡潔な説明}` の形式
  - 例：`feature/issue-45-bring-in-implementation`、`fix/issue-67-allowed-actions-bug`
- Issueには以下を含める：
  - 作業の目的・背景
  - 実装方針・アプローチ
  - 関連するドキュメントへの参照
  - 完了条件・受け入れ基準

### Do（実行）
- 実装の過程をIssueに記録
- 重要な判断や設計決定をコメントで記録
- 実装中の問題や課題を共有

### Check（評価）
- 完了後にテスト結果を報告
- 実装が要件を満たしているか確認
- パフォーマンスやコード品質の評価

### Act（改善）
- 改善点や今後の課題を記録
- 必要ならルールを更新（`.cursor/rules/` 配下のファイル）
- Issueをクローズする前に、知見をルールに反映

## 📝 Issue作成テンプレート

### 機能追加・改善
```markdown
## 目的
[何を実現したいか]

## 背景
[なぜ必要か]

## 実装方針
[どのように実装するか]

## 関連ドキュメント
- [ ] `docs/mvp/XX_設計書.md` を確認
- [ ] `.cursor/rules/requirements.mdc` を確認

## 完了条件
- [ ] 実装完了
- [ ] テスト追加・通過
- [ ] Lint/Format通過
- [ ] ドキュメント更新（必要に応じて）

## 備考
[その他の情報]
```

### バグ修正
```markdown
## 問題の説明
[何が問題か]

## 再現手順
1. ...
2. ...

## 期待される動作
[どうあるべきか]

## 環境
- OS: ...
- Node.js: ...
- ブラウザ: ...

## 関連Issue
[関連するIssue番号]
```

## 💬 コミットメッセージルール

### 基本形式
```
<type>: <subject>

<body>

<footer>
```

### Type（必須）
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの動作に影響しない変更（フォーマット、セミコロンなど）
- `refactor`: バグ修正や機能追加を伴わないコード改善
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更

### Subject（必須）
- 50文字以内
- 日本語可（プロジェクトの方針に従う）
- 現在形で記述
- 文末にピリオド不要

### Body（任意）
- 変更の理由や背景を説明
- 72文字で折り返し

### Footer（任意）
- 関連するIssue番号を記載（`Closes #123` など）

### 例
```
feat: 3rd streetのbring-in処理を実装

- getAllowedActionsにbring-in判定を追加
- actor.tsにbring-inアクションを実装
- テストケースを追加

Closes #45
```

## 🚫 コミット禁止ルール

### Explicit Commits Only
- **ユーザーからの明示的な指示があるまでコミットしないこと**
- AIが自動的にコミットを作成しない

### Clean Commits
- **テスト、Lint、Format が全て通る状態でのみコミットすること**
- コミット前には以下を実行：
  ```bash
  npm run lint
  npm run format
  npm run test
  ```

### コミット前チェックリスト
- [ ] テストが全て通過
- [ ] Lintエラーがない
- [ ] フォーマットが適用されている
- [ ] 不要なコメントやデバッグコードを削除
- [ ] コミットメッセージが適切

## 🔀 ブランチ戦略

### 基本方針（必須）
- **開発依頼時は必ず最新のmainブランチから開発用ブランチを作成すること**
- `main` ブランチには直接コミットしない
- 作業開始前に必ず以下を実行：
  ```bash
  git checkout main
  git pull origin main
  git checkout -b feature/issue-{番号}-{簡潔な説明}
  # または
  git checkout -b fix/issue-{番号}-{簡潔な説明}
  ```

### ブランチ命名規則
- `feature/issue-{番号}-{簡潔な説明}`: 機能追加・改善
- `fix/issue-{番号}-{簡潔な説明}`: バグ修正
- `docs/issue-{番号}-{簡潔な説明}`: ドキュメントのみの変更
- `refactor/issue-{番号}-{簡潔な説明}`: リファクタリング

### ブランチの種類
- `main`: 本番環境相当の安定したコード（直接コミット禁止）
- `feature/*`: 機能追加ブランチ
- `fix/*`: バグ修正ブランチ
- `docs/*`: ドキュメント変更ブランチ
- `refactor/*`: リファクタリングブランチ

### ブランチ作成時の注意事項
- 作業開始前に必ず `git pull origin main` で最新の状態を取得
- ブランチ名にはIssue番号を含める（例：`feature/issue-45-bring-in`）
- ブランチ名は英語で記述し、ハイフンで単語を区切る

## 📋 Pull Request

PRを作成・運用する場合は以下のルールに従ってください：

### PRの基本要件
- タイトルにIssue番号を含める（例：`#45 feat: bring-in処理を実装`）
- 変更内容を説明
- テスト結果を記載
- レビュアーを指定

### 💬 コメントによるドキュメント共有（必須）
以下のタイミングで、ドキュメントの内容をPRのコメントとして投稿してください（手動またはMCPサーバー経由）：

1. **Implementation Plan確定時**
   - 実装計画がユーザーに承認されたら、その内容（`implementation_plan.md`）をPRのコメントに追加してください。
   - これにより、レビュアーが変更の意図や計画を理解しやすくなります。

2. **タスク完了・ユーザー許可時**
   - 全てのタスクが完了し、ユーザーからマージ（または完了）の許可が出たら、最終的な結果報告（`walkthrough.md`）をPRのコメントに追加してください。
   - どのような変更が行われ、どのように検証されたかを記録として残すためです。

## 🔄 ルール更新フロー

### Issue完了時のルール更新
1. Issueの「Act」フェーズで、得られた知見を整理
2. 必要に応じて `.cursor/rules/` 配下のファイルを更新
3. 更新内容をIssueにコメントで記録
4. ルール更新もコミットに含める

### ルール更新の例
```
docs: implementation.mdcにZod使用例を追加

Issue #45の実装で得られた知見を反映。
外部データの検証パターンを明確化。

Refs #45
```

## 📊 Issue管理のベストプラクティス

### ラベルの活用（推奨）
- `enhancement`: 機能追加
- `bug`: バグ修正
- `documentation`: ドキュメント
- `refactor`: リファクタリング
- `test`: テスト関連
- `blocked`: ブロックされている
- `priority:high`: 優先度高

### マイルストーン
- 大きな機能単位でマイルストーンを作成
- 進捗を可視化

### プロジェクトボード
- GitHub Projectsで進捗管理
- 「To Do」「In Progress」「Done」などのカラムを設定
